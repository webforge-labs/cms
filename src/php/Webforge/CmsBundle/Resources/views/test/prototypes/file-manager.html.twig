{% extends "WebforgeCmsBundle:test:prototype.html.twig" %}

{% block body %}
  <div class="container-fluid">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Datei-Verwaltung</h3>
      </div>
      <div class="panel-body">

      <div class="btn-group">
        <a data-bind="click: addFilesFromDropbox" class="btn btn-default"><i class="fa fa-dropbox"></i> Dateien hinzufügen</a>
        <a data-bind="click: newFolder" class="btn btn-default"><i class="fa fa-folder"></i> Neuer Ordner</a>
      </div>

      <ol class="breadcrumb m-t-1" data-bind="foreach: breadcrumbs">
        <li><a href="#" data-bind="click: $parent.clickItem, text: label"></a></li>
      </ol>

      <!--ko if: hasItems -->
      <table class="table table-hover table-condensed">
        <tbody data-bind="foreach: sortedItems">
          <tr>
            <td><input type="checkbox" data-bind="checked: $parent.selection, checkedValue: $data"></td>
            <td><span class="fa" data-bind="css: { 'fa-folder': isDirectory, 'fa-file': isFile }"></span> <a href="#" data-bind="click: $parent.clickItem, text: label"></a></td>
          </tr>
        </tbody>
      </table>
      <!--/ko-->
      <!--ko ifnot: hasItems -->
      <div class="well">No items in this folder</div>
      <!--/ko-->

      <ul class="list-inline">
        <!--ko if: hasSelection() -->
        <!--
        <li><a href="#" data-bind="click: moveItems"><i class="fa fa-arrow-right"></i> Verschieben / Umbenennen</a></li>
        -->
        <li><a class="text-danger" href="#" data-bind="click: removeItems"><i class="fa fa-trash"></i> Löschen</a></li>
        <!--/ko-->
      </ul>
      </div>
    </div>
  </div>

{% endblock %}

{% block requirejs %}
 <script type="text/javascript">
   require(['cms/FileManager/ns', 'jquery'], function(FileManager, $) {
     var model = new FileManager.Manager({
       root: {
         name: 'home',
         type: 'ROOT',
         items: [
           {
             name: '2016-03-27',
             type: 'directory',
             items: [
               {
                 'name': 'Foto 27.03.16, 16 14 18.jpg'
               },
               {
                 'name': 'Foto 27.03.16, 16 14 21 (1).jpg'
               },
               {
                 'name': 'Foto 27.03.16, 16 14 21.jpg'
               },
               {
                 'name': 'Foto 27.03.16, 16 14 54.jpg'
               },
               {
                 'name': 'Neuer Ordner',
                 'type': 'directory',
                 'items': []
               }
             ]
           }
         ]
       }
     });

     model.bindTo($('body'));
   });
 </script>
{% endblock %}